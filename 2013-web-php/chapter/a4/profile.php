<!DOCTYPE html>
<html lang="en">
<head>
    <?php require_once('../../include/head-include.php'); ?>
    <title>My Profile - Insecure Direct Object Reference | LearnByExploit</title>
</head>
<body>
<!-- wrapper -->
<div class="wrapper">
    <?php require_once('../../include/header.php'); ?>
    <!-- shell -->
    <div class="shell">
        <!-- main -->
        <div class="main">
            <section class="content">
                <h3>My Profile</h3>
                <?php

                if(isset($_POST['id'])) {
                    $user_id = $_POST['id'];
                    require_once('../../config/database.php');
                    $con = mysqli_connect($host, $user, $password, $database, $port) or die("Database Connection error.<br />Please review the settings under /config/database.php<br />The current settings are<br />host: ".$host."<br />user: ".$user."<br />password: ".$password.'<br />db: '.$database.'<br />port: '.$port.'<br />socket: '.$socket);
                    $query = "SELECT full_name, email, phone FROM victim_user where user_id =".$user_id;
                    $result = mysqli_query($con, $query);
                    if(1 == $result->num_rows) {
                        $row = $result->fetch_assoc();
                        ?>
                        <form method="POST">
                            <table>
                                <tr>
                                    <td>Name: </td>
                                    <td><input type="text" name="full_name" <?php echo $row['full_name']; ?> </td>
                                </tr>
                            </table>
                        </form>
                        <?php
                    }
                    else {
                        echo "Invalid User";
                    }
                }
                ?>


                <br />
            </section>
        </div>
        <!-- end of main -->
    </div>
    <!-- end of shell -->
    <?php require_once('../../include/footer.php'); ?>
</div>
<!-- end of wrapper -->
</body>
</html>