<!DOCTYPE html>
<html lang="en">
<head>
	<?php require_once('../../include/head-include.php'); ?>
	<title>User Search | SQLi LearByExploit</title>
</head>
<body>
	<!-- wrapper -->
	<div class="wrapper">
		<?php require_once('../../include/header.php'); ?>
		<!-- shell -->
		<div class="shell">
			<!-- main -->
			<div class="main">
				<section class="content">
					<h3>An interactive User Identity Directory</h3>
					<p>Start searching user id like 1..</p>
					<p><input type="text" name="s" id="search" placeholder="1" /></p>
					<div id="result"></div>
					<!-- AJAX & JS works -->
					<script type="text/javascript">
						$(document).ready( function() {
							$('#search').keyup( function() {
								if($('#search').val().length >0) {
									$.post("2013-web-php/chapter/a1/search-api.php", {
								        search: $('#search').val()
								    },
								    function(data, status){
								    	if(data.success) {
								    		$('#result').html('<b>The user is found:</b><br />');
								    		for(var i=0; i< data.users.length; i++) {
									    		$('#result').html($('#result').html() + " Name: " + data.users[i].full_name + '<br />Email: ' + data.users[i].email + '<br />Phone: ' + data.users[i].phone + '<br />');
									    	}
								    	}
								    	else
								    		$('#result').html(data.msg);
								    });
								}
								else {
									$('#result').html('');
								}
							});
						});
					</script>
					<hr />
					<h3>Challenge</h3>
					<p>Try to SQLi it</p>
					<h3>Minimal Solution</h3>
					<ul>
						<li>Disover the AJAX API Call</li>
						<li>It's <?php echo $HOME; ?>chapter/a1/search-api.php</li>
						<li>search is the HTTP Request parameter</li>
						<li>search parameter works on GET as well as it is handlin both GET &amp; POST via $_REQUEST</li>
						<li>Now open <?php echo $HOME; ?>chapter/a1/search-api.php?search=h" and note the SQL error.</li>
					</ul>
				</section>
			</div>
			<!-- end of main -->
		</div>
		<!-- end of shell -->	
		<?php require_once('../../include/footer.php'); ?>
	</div>
	<!-- end of wrapper -->
</body>
</html>